# 工作环境优化

## 代码补全
### 下载clangd (我们的环境已经帮你做好)
命令行中安装
```[shell]
sudo apt install clangd
```
这里可以选择更新的版本，这里为了防止选择困难症就使用最简单的

### vscode 安装clangd插件
插件搜索clangd,就只叫clangd，有小蓝标，发布于LLVM

### vscode 安装CMakeTool插件
插件搜索CMakeTool，有小蓝标发布者为Microsoft

### CMakeLists.txt中添加补全启用命令
在`project()`行下面添加
```
set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
```

之后进行一次`colcon build`

### 统一C++开发版本
在`CMakeLists.txt`刚刚添加的命令中添加
```
set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -std=c11")
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++20")
```

### ament自动寻找包
在之前的ros2功能包中，我们需要在`package.xml`和`CMakeLists.txt`同时添加依赖的包，这非常不优雅，因此

替换CMakeLists.txt文件的以下内容：

删除`if(BUILD_TESTING)`

所有的`find_package`替换为：
```[cmake]
find_package (ament_cmake_auto REQUIRED)
ament_auto_find_build_dependencies ()
```

对于不同的可执行文件，添加:
```
ament_auto_add_executable (
  可执行文件名
  要编译的文件)
```

`ament_package()` 替换为：
```
ament_auto_package()
```